(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{113:function(e,t,a){e.exports={myPosts:"MyPosts_myPosts__14O2X"}},114:function(e,t,a){e.exports={fieldRender:"renderField_fieldRender__1ZRSn",error:"renderField_error__1EyVG"}},147:function(e,t,a){"use strict";a.d(t,"a",(function(){return d}));var n=a(23),r=a(24),i=a(26),c=a(25),o=a(12),s=a(0),l=a.n(s),u=a(14),m=function(e){return{isAuth:e.authentication.isAuth}},d=function(e){var t=function(t){Object(i.a)(s,t);var a=Object(c.a)(s);function s(){return Object(n.a)(this,s),a.apply(this,arguments)}return Object(r.a)(s,[{key:"render",value:function(){return this.props.isAuth?l.a.createElement(e,this.props):l.a.createElement(o.a,{to:"/login"})}}]),s}(l.a.Component);return Object(u.b)(m)(t)}},148:function(e,t,a){"use strict";a.d(t,"b",(function(){return c}));var n=a(91),r=a(10),i={dialogsData:[{id:1,name:"Sergey"},{id:2,name:"Sveta"},{id:3,name:"Natasha"},{id:4,name:"Petra"},{id:5,name:"Vitya"},{id:6,name:"Kolya"}],messageData:[{id:1,message:"hi"},{id:2,message:"my name is petra"},{id:3,message:"yo"}],newMessageText:""},c=function(e){return{type:"ADD-MESSAGE",text:e}};t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD-MESSAGE":var a={id:4,message:t.text};return Object(r.a)(Object(r.a)({},e),{},{messageData:[].concat(Object(n.a)(e.messageData),[a]),newMessageText:""});default:return e}}},152:function(e,t,a){e.exports={banner:"Profile_banner__2Yg2C",descriptionBlock:"Profile_descriptionBlock__3qLia"}},154:function(e,t,a){e.exports={item:"Post_item__1d730"}},157:function(e,t,a){e.exports=a.p+"static/media/loading.a38cd8d3.svg"},197:function(e,t,a){e.exports=a(328)},202:function(e,t,a){},203:function(e,t,a){},209:function(e,t,a){},210:function(e,t,a){},28:function(e,t,a){e.exports={sidebar:"Sidebar_sidebar__2WupE",item:"Sidebar_item__3zPF1",activeLink:"Sidebar_activeLink__1lvgz"}},30:function(e,t,a){"use strict";a.d(t,"c",(function(){return n})),a.d(t,"a",(function(){return i})),a.d(t,"b",(function(){return c}));var n=function(e){return e?void 0:"Required"},r=function(e){return function(t){return t&&t.length>e?"Must be ".concat(e," characters or less"):void 0}},i=r(10),c=r(50)},328:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(34),c=a.n(i),o=(a(202),a(23)),s=a(24),l=a(26),u=a(25),m=(a(203),a(204),a(28)),d=a.n(m),p=a(15),E=function(){return r.a.createElement("nav",{className:d.a.sidebar},r.a.createElement("div",{className:d.a.item},r.a.createElement(p.b,{to:"/profile",activeClassName:d.a.activeLink},"Profile")),r.a.createElement("div",{className:d.a.item},r.a.createElement(p.b,{to:"/dialogs",activeClassName:d.a.activeLink},"Message")),r.a.createElement("div",{className:d.a.item},r.a.createElement(p.b,{to:"/allusers",activeClassName:d.a.activeLink},"All Users")),r.a.createElement("div",{className:d.a.item},r.a.createElement(p.b,{to:"/news",activeClassName:d.a.activeLink},"News")),r.a.createElement("div",{className:d.a.item},r.a.createElement(p.b,{to:"/music",activeClassName:d.a.activeLink},"Music")))},f=a(12),v=(a(209),function(){return r.a.createElement("div",null,"This is News Page!")}),h=(a(210),function(){return r.a.createElement("div",null,"This is Music Page!")}),b=a(152),g=a.n(b),O=a(20),y=a.n(O),_=a(39),j=a(91),S=a(10),P=a(46),k=a(68),w="PROFILE_REDUCER/SET_NEW_POST",R="PROFILE_REDUCER/SET_USER_PROFILE",U={postData:[{id:1,text:"My first post",like:20},{id:2,text:"My second post",like:30}],userProfile:null},x=function(e){return{type:R,profile:e}},N=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case w:var a={id:5,text:t.newText,like:0};return Object(S.a)(Object(S.a)({},e),{},{postData:[].concat(Object(j.a)(e.postData),[a])});case R:return Object(S.a)(Object(S.a)({},e),{},{userProfile:t.profile});default:return e}},T=a(113),C=a.n(T),L=a(154),D=a.n(L),I=function(e){return r.a.createElement("div",{className:D.a.item},r.a.createElement("img",{src:"https://windows10free.ru/uploads/posts/2017-04/1493287748_1487679899_icon-user-640x640.png"}),e.text,r.a.createElement("div",null,r.a.createElement("span",null,e.like," like")))},A=a(149),M=a(150),F=a(52),G=a(30),B=Object(M.a)({form:"newPostForm"})((function(e){var t=e.handleSubmit;return r.a.createElement("form",{onSubmit:t},r.a.createElement(A.a,{component:F.b,name:"text",placeholder:"Text",validate:[G.c,G.b]}),r.a.createElement("button",null,"Add Post"))})),z=function(e){var t=e.postsData,a=e.setNewPost,n=t.map((function(e){return r.a.createElement(I,{text:e.text,like:e.like,key:e.id})}));return r.a.createElement("div",{className:C.a.myPosts},r.a.createElement(B,{onSubmit:function(e){a(e.text)}}),r.a.createElement("div",{className:C.a.myPosts},n))},H=a(14),W=Object(H.b)((function(e){return{newPostText:e.profilePage.newPostText,postsData:e.profilePage.postData}}),{setNewPost:function(e){return{type:w,newText:e}}})(z),V=a(84),X=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={editMode:!1,status:e.props.status},e.activateEditMode=function(){e.setState({editMode:!0})},e.onStatusChange=function(t){e.setState({status:t.status,editMode:!1})},e}return Object(s.a)(a,[{key:"render",value:function(){return r.a.createElement("div",null,this.state.editMode?r.a.createElement(Z,{onSubmit:this.onStatusChange,status:this.state.status}):r.a.createElement("div",null,r.a.createElement("span",{onDoubleClick:this.activateEditMode},this.state.status)))}}]),a}(r.a.Component),Z=Object(M.a)({form:"statusForm"})((function(e){return r.a.createElement("form",{onSubmit:e.handleSubmit},r.a.createElement(A.a,{component:F.a,name:"status",autoFocus:!0,value:"props.status",validate:[G.c,G.a]}),r.a.createElement("button",null,"OK"))})),q=function(e){var t=e.user;return r.a.createElement("div",null,r.a.createElement("div",{className:g.a.descriptionBlock},r.a.createElement("div",null,"Last updated: ",t.updated),r.a.createElement("img",{src:t.photoUrl}),r.a.createElement("div",null,r.a.createElement(X,{status:"MyStatus"})),r.a.createElement("div",null,t.firstName," ",t.lastName),r.a.createElement("div",null,t.location),r.a.createElement("div",null,t.status),r.a.createElement("div",null,"description")))},J=function(e){var t=e.userProfile;return t?r.a.createElement("div",null,r.a.createElement(q,{user:t}),r.a.createElement(W,null)):r.a.createElement(V.a,null)},K=a(147),Y=a(11),$=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"componentDidMount",value:function(){void 0!==this.props.match.params.userId?this.props.getUserById(this.props.match.params.userId):null!==this.props.authUser&&this.props.setUserProfile(this.props.authUser)}},{key:"componentDidUpdate",value:function(e,t,a){void 0===this.props.match.params.userId&&this.props.setUserProfile(this.props.authUser)}},{key:"render",value:function(){return r.a.createElement(J,this.props)}}]),a}(r.a.PureComponent),Q=Object(Y.d)(Object(H.b)((function(e){return{userProfile:e.profilePage.userProfile,isFetching:e.usersPage.isFetching,token:e.authentication.token,authUser:e.authentication.user}}),{setUserProfile:x,getUserById:function(e){return function(){var t=Object(_.a)(y.a.mark((function t(a){var n;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a(Object(k.d)(!0)),t.next=3,P.a.getUserById(e);case 3:200===(n=t.sent.data).responseStatus.resultCode&&a(x(n.payload)),a(Object(k.d)(!1));case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}}),f.f,K.a)($),ee=a(51),te={user:null,isAuth:!1},ae=function(e){return{type:"SET_AUTH_USER",user:e}},ne=function(e,t,a){return function(){var a=Object(_.a)(y.a.mark((function a(n){var r,i;return y.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,P.a.login(e,t);case 2:if(a.t1=r=a.sent,a.t0=null===a.t1,a.t0){a.next=6;break}a.t0=void 0===r;case 6:if(!a.t0){a.next=10;break}a.t2=void 0,a.next=11;break;case 10:a.t2=r.data;case 11:if(void 0!==(i=a.t2)){a.next=15;break}return n(Object(ee.a)("login",{_error:"Server not responding. Please try again later"})),a.abrupt("return");case 15:void 0!==i.payload&&200===i.responseStatus.resultCode?n(ae(i.payload)):n(Object(ee.a)("login",{_error:i.responseStatus.message}));case 16:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()},re=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:te,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_AUTH_USER":return{user:t.user,isAuth:!0};case"DEL_AUTH_USER":return{user:null,isAuth:!1};default:return e}},ie=a(335),ce=a(339),oe=a(161),se=Object(M.a)({form:"login"})((function(e){return r.a.createElement(ie.a,{onSubmit:e.handleSubmit},r.a.createElement(ie.a.Group,{controlId:"formBasicLogin"},r.a.createElement(ie.a.Label,null,"Username"),r.a.createElement(ie.a.Control,{as:A.a,type:"text",component:F.a,name:"username",placeholder:"Please enter Username",validate:[G.c,G.a]}),r.a.createElement(ie.a.Text,{className:"text-muted"},"We'll never share your email with anyone else.")),r.a.createElement(ie.a.Group,{controlId:"formBasicPassword"},r.a.createElement(ie.a.Label,null,"Password"),r.a.createElement(ie.a.Control,{as:A.a,type:"password",component:F.a,name:"password",placeholder:"Please enter password",validate:[G.c,G.a]})),e.error&&r.a.createElement(ie.a.Group,{controlId:"formBasicError"},r.a.createElement(ce.a,{variant:"danger"},e.error)),r.a.createElement(ie.a.Group,{controlId:"formBasicCheckbox"},r.a.createElement(ie.a.Check,{type:"checkbox",label:"Remember me"})),r.a.createElement(oe.a,{className:"float-right",variant:"primary",type:"submit"},"Sign in"))})),le=function(e){return r.a.createElement("div",null,r.a.createElement("h1",null,"Login"),r.a.createElement(se,{onSubmit:function(t){e.login(t.username,t.password,t.rememberMe)}}))},ue=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){return this.props.isAuth?r.a.createElement(f.a,{to:"/profile"}):r.a.createElement("div",null,r.a.createElement(le,{login:this.props.login}))}}]),a}(r.a.Component),me=Object(H.b)((function(e){return{user:e.authentication.user,isAuth:e.authentication.isAuth}}),{login:ne})(ue),de=a(338),pe=a(333),Ee=a(158),fe=function(e){return r.a.createElement(ie.a,{inline:!0},r.a.createElement(Ee.a,{type:"text",placeholder:"Search",className:"mr-sm-2"}),r.a.createElement(oe.a,{variant:"light"},"Search"))},ve=a(337),he=a(336),be=function(e){return r.a.createElement(ve.a,{className:"mr-auto"},r.a.createElement(ve.a.Link,{as:p.b,to:"/"},"Home"),r.a.createElement(ve.a.Link,{as:p.b,to:"/profile"},"Profile"),r.a.createElement(ve.a.Link,{as:p.b,to:"/allUsers"},"Users"))},ge=function(e){var t=e.login,a=e.logout,n=e.isAuth,i=e.user;return r.a.createElement(he.a,{alignRight:!0,className:"ml-5"},r.a.createElement(he.a.Toggle,{variant:"dark",id:"dropdown-basic"},n?r.a.createElement(r.a.Fragment,null,r.a.createElement("img",{className:"d-inline-block align-top",src:null===i||void 0===i?void 0:i.photoUrl,height:"22",width:"22"}),null===i||void 0===i?void 0:i.firstName):"Sign in"),r.a.createElement(he.a.Menu,{className:"dropdown-menu-login"},n?r.a.createElement(r.a.Fragment,null,r.a.createElement(he.a.ItemText,null,"Signed in as ",null===i||void 0===i?void 0:i.firstName),r.a.createElement(he.a.Divider,null),r.a.createElement(he.a.ItemText,{className:"float-right"},r.a.createElement(oe.a,{onClick:function(){a()},className:"float-right",variant:"primary"},"Sign out"))):r.a.createElement(he.a.ItemText,null,r.a.createElement(le,{login:t}))))},Oe=r.a.memo((function(e){return r.a.createElement(de.a,{collapseOnSelect:!0,expand:"md",bg:"dark",variant:"dark"},r.a.createElement(pe.a,{fluid:!0},r.a.createElement(de.a.Brand,{as:p.b,to:"/"},"Perfume SiS"),r.a.createElement(de.a.Toggle,{"aria-controls":"responsive-navbar-nav"}),r.a.createElement(de.a.Collapse,{id:"responsive-navbar-nav"},r.a.createElement(be,null),r.a.createElement(fe,null),r.a.createElement(ge,e))))})),ye=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(Oe,this.props))}}]),a}(r.a.PureComponent),_e=Object(H.b)((function(e){return{user:e.authentication.user,isAuth:e.authentication.isAuth}}),{logout:function(){return function(e){P.a.logout(),e({type:"DEL_AUTH_USER"})}},login:ne})(ye),je=a(334),Se=a(159),Pe={initialize:!1},ke=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INITIALIZED":return Object(S.a)(Object(S.a)({},e),{},{initialize:!0});default:return e}},we=a(148),Re=a(166),Ue=a(151),xe=Object(Y.c)({profilePage:N,dialogPage:we.a,usersPage:k.a,userProfile:N,authentication:re,form:Ue.a,app:ke}),Ne=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||Y.d,Te=Object(Y.e)(xe,Ne(Object(Y.a)(Re.a))),Ce=Te;window.__store__=Te;var Le=function(e){return function(t){return r.a.createElement(n.Suspense,{fallback:r.a.createElement("div",null,"Loading...")},r.a.createElement(e,t))}},De=r.a.lazy((function(){return a.e(3).then(a.bind(null,346))})),Ie=r.a.lazy((function(){return a.e(4).then(a.bind(null,347))})),Ae=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.props.initialized()}},{key:"render",value:function(){return this.props.initialize?r.a.createElement(p.a,null,r.a.createElement(pe.a,{fluid:!0},r.a.createElement(je.a,null,r.a.createElement(Se.a,{className:"p-0"},r.a.createElement(_e,null))),r.a.createElement(je.a,null,r.a.createElement(Se.a,{xs:!0,lg:2,className:"p-0"},r.a.createElement(E,null)),r.a.createElement(Se.a,{className:"p-0"},r.a.createElement(f.b,{path:"/profile/:userId?",render:function(){return r.a.createElement(Q,null)}}),r.a.createElement(f.b,{path:"/dialogs",render:Le(De)}),r.a.createElement(f.b,{path:"/allusers",render:Le(Ie)}),r.a.createElement(f.b,{path:"/news",component:v}),r.a.createElement(f.b,{path:"/music",component:h}),r.a.createElement(f.b,{path:"/login",render:function(){return r.a.createElement(me,null)}}))))):r.a.createElement(V.a,null)}}]),a}(r.a.Component),Me=Object(H.b)((function(e){return{initialize:e.app.initialize}}),{initialized:function(){return function(){var e=Object(_.a)(y.a.mark((function e(t){var a;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t(function(){var e=Object(_.a)(y.a.mark((function e(t){var a,n;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P.a.checkLogin();case 2:return a=e.sent,void 0!==(n=null===a||void 0===a?void 0:a.data)&&void 0!==n.payload&&t(ae(n.payload)),e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=3,Promise.all([a]);case 3:t({type:"INITIALIZED"});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}})(Ae),Fe=function(){return r.a.createElement(r.a.StrictMode,null,r.a.createElement(H.a,{store:Ce},r.a.createElement(Me,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(Fe,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},46:function(e,t,a){"use strict";var n=a(153),r=a.n(n),i=a(168),c=r.a.create({withCredentials:!0,responseType:"application/json",baseURL:"http://localhost:8080/api"}),o={login:function(e,t){return c.post("/auth/login",{username:e,password:t}).catch((function(e){console.log(e)}))},logout:function(){(new i.a).remove("token_api")},checkLogin:function(){return c.get("/auth").catch((function(e){console.log("ERROR: checkLogin in api.js")}))},getUsers:function(e,t){return c.get("".concat("/v1","/admin/customers?page=").concat(e,"&size=").concat(t))},getUserById:function(e){return c.get("".concat("/v1","/admin/customers/").concat(e))}};t.a=o},52:function(e,t,a){"use strict";a.d(t,"b",(function(){return l})),a.d(t,"a",(function(){return u}));var n=a(170),r=a(0),i=a.n(r),c=a(114),o=a.n(c),s=function(e){return function(t){var a=t.input,r=t.label,c=t.meta,s=c.touched,l=c.error,u=c.warning,m=Object(n.a)(t,["input","label","meta"]),d=s&&l,p=s&&l;return i.a.createElement("div",{className:o.a.fieldRender+" "+(d?o.a.error:"")},i.a.createElement("div",null,r),i.a.createElement("div",null,i.a.createElement(e,Object.assign({label:r},a,m))),i.a.createElement("div",null,d&&i.a.createElement("span",null,l)||p&&i.a.createElement("span",null,u)))}},l=s("textarea"),u=s("input")},68:function(e,t,a){"use strict";a.d(t,"b",(function(){return p})),a.d(t,"e",(function(){return E})),a.d(t,"d",(function(){return v})),a.d(t,"c",(function(){return h}));var n=a(20),r=a.n(n),i=a(39),c=a(10),o=a(46),s=function(e,t,a,n){return e.map((function(e){return e[t]===a?Object(c.a)(Object(c.a)({},e),n):e}))},l="USER_REDUCER/FOLLOW",u="USER_REDUCER/UNFOLLOW",m="USER_REDUCER/SET_USERS",d={users:[],pageSize:10,totalPages:0,currentPage:1,isFetching:!1},p=function(e){return{type:l,userId:e}},E=function(e){return{type:u,userId:e}},f=function(e){return{type:"USER_REDUCER/SET_CURRENT_PAGE",page:e}},v=function(e){return{type:"USER_REDUCER/TOGGLE_IS_FETCH",isFetching:e}},h=function(e,t){return function(){var a=Object(i.a)(r.a.mark((function a(n){var i;return r.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n(v(!0)),n(f(e)),a.next=4,o.a.getUsers(e,t);case 4:i=a.sent.data,n((r=i.payload.content,{type:m,users:r})),n({type:"USER_REDUCER/SET_TOTAL_PAGES",totalPages:i.payload.totalPages}),n(v(!1));case 8:case"end":return a.stop()}var r}),a)})));return function(e){return a.apply(this,arguments)}}()};t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case l:return Object(c.a)(Object(c.a)({},e),{},{users:s(e.users,"id",t.userId,{followed:!0})});case u:return Object(c.a)(Object(c.a)({},e),{},{users:s(e.users,"id",t.userId,{followed:!1})});case m:return Object(c.a)(Object(c.a)({},e),{},{users:t.users});case"USER_REDUCER/SET_CURRENT_PAGE":return Object(c.a)(Object(c.a)({},e),{},{currentPage:t.page});case"USER_REDUCER/SET_TOTAL_PAGES":return Object(c.a)(Object(c.a)({},e),{},{totalPages:t.totalPages});case"USER_REDUCER/TOGGLE_IS_FETCH":return Object(c.a)(Object(c.a)({},e),{},{isFetching:t.isFetching});default:return e}}},84:function(e,t,a){"use strict";var n=a(0),r=a.n(n),i=a(157),c=a.n(i);t.a=function(){return r.a.createElement("div",null,r.a.createElement("img",{src:c.a}))}}},[[197,1,2]]]);
//# sourceMappingURL=main.8d1ab16b.chunk.js.map